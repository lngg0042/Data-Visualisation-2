<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Malaysia Transportation & Logistic Industry</title>
  
  <!-- Vega & Vega-Lite -->
  <script src="https://cdn.jsdelivr.net/npm/vega@5"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-lite@5"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>

  <!-- Pure.css -->
  <link rel="stylesheet" href="https://unpkg.com/purecss@2.0.3/build/pure-min.css">

  <style>
    /* === Global Styles === */
    html { scroll-behavior: smooth; }
    body {
      font-family: 'Arial', sans-serif;
      margin: 0;
      padding: 0;
      background: #f8f9fa;
      color: #333;
      line-height: 1.5;
    }

    /* === Header === */
    /* === Header === */
header {
  position: relative;
  background: #0B6623; /* fallback color if image fails to load */
  color: white;
  padding: 80px 20px;
  text-align: center;
  z-index: 1000;
  box-shadow: 0 2px 8px rgba(0,0,0,0.2);
  overflow: hidden;
}

/* Background image layer */
/* === Background image layer === */
header::before {
  content: "";
  position: absolute;
  inset: 0;
  background:
    linear-gradient(rgba(11, 102, 35, 0.6), rgba(11, 102, 35, 0.6)),
    url("https://raw.githubusercontent.com/lngg0042/Data-Visualisation-2/main/Transportation.jpg");
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
  opacity: 0.8;
  z-index: -1;
}


/* Text styling */
header h1 { 
  margin: 0; 
  font-size: 42px; 
  font-weight: 800;
  letter-spacing: 1px;
}

header .subtitle { 
  margin-top: 10px; 
  font-size: 18px; 
  font-weight: 400; 
  color: #fff; 
  max-width: 900px;
  margin-left: auto;
  margin-right: auto;
  line-height: 1.6;
}



    nav.nav-links {
      position: sticky;
      top: 0;
      background: #0B6623;  /* same as header */
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 15px;
      padding: 10px 0;
      z-index: 1000;
      box-shadow: 0 2px 8px rgba(0,0,0,0.2);
    }

    nav.nav-links a {
      text-decoration: none;
      color: #fff;
      font-weight: 500;
      padding: 8px 16px;
      border-radius: 6px;
      transition: background 0.3s, color 0.3s;
    }

    nav.nav-links a:hover,
    nav.nav-links a.active { 
      background: #ffffff33; 
      color: #fff; 
    }

    /* === Main Layout === */
    main {
      max-width: 1200px; 
      margin: auto; 
      padding: 30px 20px;
    }

    /* === Subtitle Alignment === */
    .subtitle-container {
      max-width: 1200px;   /* same as .chart-container */
      margin: 0 auto;      /* center horizontally */
      text-align: justify; /* optional: or 'center' if you want centered text */
      padding: 0 20px;     /* matches main padding for consistent alignment */
    }


    /* === Chart Containers === */
    .chart-container {
      background: #fff;
      padding: 30px;
      border-radius: 12px;
      border-left: 6px solid #0B6623;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      transition: transform 0.3s, box-shadow 0.3s;
      margin-bottom: 50px;
    }
    .chart-container:hover {
      transform: translateY(-4px);
      box-shadow: 0 6px 18px rgba(0,0,0,0.15);
    }
    .chart-container h2 {
      margin-bottom: 15px; 
      font-size: 26px; 
      color: #0B6623;
      font-weight: 700;
      display: flex; 
      align-items: center; 
      gap: 8px;
    }

    /* === KPI Styling Example === */
    .kpi {
      display: flex;
      align-items: baseline;
      gap: 5px;
      margin-top: 5px;
      margin-bottom: 5px;
    }
    .kpi-value { font-size: 32px; font-weight: 700; color: #0B6623; }
    .kpi-label { font-size: 16px; color: #555; }

    /* === Storytelling Text === */
    .story {
      font-size: 18px;
      color: #555;
      line-height: 1.6;
      margin-bottom: 20px;
    }
    .insights {
      display: flex;
      gap: 15px;
      margin-bottom: 20px;
      flex-wrap: wrap;
    }
    .insight-card {
      background: #e9f2ff;
      padding: 15px;
      border-left: 4px solid #0B6623;
      border-radius: 8px;
      flex: 1;
      font-size: 15px;
    }
    h3 { color: #0B6623; margin-top: 20px; font-weight: 700; }
    ul { margin-left: 20px; color: #333; }

    /* === Back-to-Top Button === */
    #backToTop {
      position: fixed;
      bottom: 30px;
      right: 30px;
      display: none;
      background: #0B6623;
      color: white;
      border: none;
      border-radius: 50%;
      width: 45px;
      height: 45px;
      cursor: pointer;
      font-size: 22px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.3);
      z-index: 1000;
      transition: background 0.3s;
    }
    #backToTop:hover { background: #E4F4E8; }

    /* === Footer === */
    footer { 
      text-align: center; 
      padding: 25px; 
      color: #555; 
      background: #e9ecef; 
      margin-top: 30px; 
      font-size: 14px;
    }

    /* === Responsive Typography === */
    @media (max-width: 768px) {
      header h1 { font-size: 45x; }
      header .subtitle { font-size: 15px; }
      .chart-container h2 { font-size: 22px; }
      .kpi-value { font-size: 26px; }
      .kpi-label { font-size: 14px; }
    }
    
    /* === Align Spec === */
    #employment-chart {
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    #employment-chart .vl-binding {
      order: 2; /* make it appear after the chart */
      margin-top: 10px;
    }
    #employment-chart .vl-view {
      order: 1; /* the chart itself stays on top */
    }

    
    #establishment-chart {
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    #establishment-chart .vl-binding {
      order: 2; /* make it appear after the chart */
      margin-top: 10px;
    }
    #establishment-chart .vl-view {
      order: 1; /* the chart itself stays on top */
    }

    #assets-chart {
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    #assets-chart .vl-binding {
      order: 2; /* make it appear after the chart */
      margin-top: 10px;
    }
    #assets-chart .vl-view {
      order: 1; /* the chart itself stays on top */
    }

    
    #grossoutput-chart {
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    #grossoutput-chart .vl-binding {
      order: 2; /* make it appear after the chart */
      margin-top: 10px;
    }
    #grossoutput-chart .vl-view {
      order: 1; /* the chart itself stays on top */
    }

    #valueadded-chart {
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    #valueadded-chart .vl-binding {
      order: 2; /* make it appear after the chart */
      margin-top: 10px;
    }
    #valueadded-chart .vl-view {
      order: 1; /* the chart itself stays on top */
    }

    #airports-chart {
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    #airports-chart .vl-binding {
      order: 2; /* make it appear after the chart */
      margin-top: 10px;
    }
    #airports-chart .vl-view {
      order: 1; /* the chart itself stays on top */
    }

  </style>
</head>
<body>
  <header>
    <div class="header-content">
    <h1>Malaysia Transportation & Logistic Industry</h1>
      <div class="subtitle-container">
          <p class="subtitle">
            Malaysia's transportation and logistic (T&L) industry forms the backbone of the national economy, leveraging the country's strategic position in Southeast Asia. 
            The sector is built on a foundation of world-class ports like Port Klang, the air cargo gateway of Kuala Lumpur International Airport (KLIA), and an extensive land network.
            It is rapidly evolving with government intiatives such as the National Trade Facilitation Blueprint and the Logistics and Trade Facilitation Master Plan.
            Today, the sector is undergoing a significant transformation, driven by the rise of e-commerce, technological adoption and the need for integrated, end-to-end supply chain solutions.
          </p>
       </div>
    </div>  
  </header>
    <nav class="nav-links">
      <a href="#valueadded">Value Added</a>
      <a href="#grossoutput">Gross Output</a>
      <a href="#airports">Airports</a>
      <a href="#assets">Assets</a>
      <a href="#establishment">Establishments</a>
      <a href="#employment">Employment</a>
    </nav>
 

  <main class="pure-g">
    <!-- Value Added -->
    <div id="valueadded" class="pure-u-1 chart-container">
      <h2>📊 Value Added by State</h2>
      <p class="story">
        The transportation sector shows high value added in <b>Selangor</b>, following by <b>W.P. Kuala Lumpur</b>, <b>Johor</b>, <b>Sarawak</b> and <b>Pulau Pinang</b>,
        contributing over <strong>RM 31.9M</strong> to the economy. This indicates that these states play a critical role in driving 
        logistic and trade,supported by strong industrial activity, advanced infrastructure, and major ports.
        In contrast, eastern states show lower contributions, highlighting regional disparities.
      </p>
      <div class="kpi">
        <p class="kpi-value">RM 47.71M</p>
        <p class="kpi-label">Total Value Added</p>
      </div>
      <div class="insights">
        <div class="insight-card"><strong>Highest Value Added:</strong> Selangor (RM 25.25M)</div>
        <div class="insight-card"><strong>Lowest Value Added:</strong> Perlis (RM76K)</div>
      </div>
      <div id="valueadded-chart"></div>
    </div>

    <!-- Gross Output -->
    <div id="grossoutput" class="pure-u-1 chart-container">
      <h2>📈 Gross Output per km² by State</h2>
      <p class="story">
        Gross output density highlights industrial hubs. <b>Selangor</b> dominate following by <b>Melaka</b>
        indicating high logistics activity per area. This concentration reflects their role as Malaysia's main
        commericial and population centers, where dense infrastructure, ports, airports, and road networks support 
        large-scale logistic operations. It also indicate more efficient use of limited land.
      </p>
      <div class="insights">
        <div class="insight-card"><strong>Highest Output Density:</strong> Selangor (RM 8K/km²)</div>
        <div class="insight-card"><strong>Lowest Output Density:</strong> Kelantan (RM 19.4/km²)</div>
      </div>
      <div id="grossoutput-chart"></div>
    </div>

    <!-- Airports -->
    <div id="airports" class="pure-u-1 chart-container">
      <h2>✈️ Airports in Malaysia</h2>
      <p class="story">
        Malaysia has multiple international and domestic airports supporting passenger and cargo 
        transport. <b>Kuala Lumpur International Airport (KLIA)</b> is <b>Malaysia's major key hub</b> for
        carriers like Malaysia Airlines and AirAsia. <b>Sabah</b> and <b>Sarawak</b> have the highest concentration of 
        airports due to their mountainous and island geography. 
      </p>
      <div class="insights">
        <div class="insight-card"><strong>Total Airports:</strong> 38</div>
        <div class="insight-card"><strong>Major International:</strong> KLIA, Penang, Kota Kinabalu</div>
      </div>
      <p style="font-size: 14px; color: #555; margin-bottom: 10px;">
        Please select a airport type by clicking a circle in the legend menu to view the data.
      </p>
      <div id="airports-chart"></div>
    </div>
    
    <!-- Assets -->
    <div id="assets" class="pure-u-1 chart-container">
      <h2>🚛 Distribution of Transportation Assets</h2>
      <p class="story">
        In <b>2010</b>, W.P. Kuala Lumpur held the largest share of fixed assets, followed closely by Selangor, reflecting the capital’s 
        dominance as Malaysia’s financial and commercial hub. However, by <b>2014</b> the positions had shifted, with <b>Selangor</b> overtaking 
        <b>Kuala Lumpur</b> to become the leading state in fixed asset value. This change highlights Selangor’s rapid growth as an industrial 
        and logistics hub, supported by its strong infrastructure, ports, and expanding manufacturing activities
        which is assets distribution becomes more regionally spread.
      </p>
      <p style="font-size: 14px; color: #555; margin-bottom: 10px;">
        Please select a year from the dropdown menu to view the data.
      </p>
      <div id="assets-chart"></div>
    </div>


    <!-- Transport Establishments -->
    <div id="establishment" class="pure-u-1 chart-container">
      <h2>🏢 Transport Establishments</h2>
      <p class="story">
        The distribution of transport establishments highlights a strong concentration in urban and industrial hubs. 
        <b>Selangor</b> leads with the largest number of establishments and workforce, supported by major ports, airports, 
        and highways that make it the core logistics hub of Malaysia. In East Malaysia, <b>Sabah</b> and <b>Sarawak</b> show many 
        establishments but employ fewer people compare to West Malaysia, indicating smaller-scale, regionally focused operations.
      </p>
      <div class="insights">
        <div class="insight-card"><strong>Total Establishments:</strong> 94,789</div>
        <div class="insight-card"><strong>Major Cities:</strong> Selangor, Johor, Sarawak, Sabah</div>
      </div>
      <div id="establishment-chart"></div>
    </div>

    <!-- Employment -->
    <div id="employment" class="pure-u-1 chart-container">
      <h2>👥 Employment & Workforce</h2>
      <p class="story">
        Employment growth in Malaysia's transport and logistic sector dropped slightly in <b>2014</b>, 
        but after it rebounded sharply from <b>2015</b> onwards. By <b>2017</b>, here were about <b>50%</b> 
        more workers compared to <b>2010</b>, showing that rising of projects, trade and growth in sector.
      </p>
      <p style="font-size: 14px; color: #555; margin-bottom: 10px;">
        Please select a metric type from the dropdown menu to view the graph.
      </p>

      <div id="employment-chart"></div>
    </div>
  </main>

  <button id="backToTop">↑</button>

  <footer>
    This visualisation is created by Ng Li Xian. 
    <br>The data is from 
    <a href="https://archive.data.gov.my/data/ms_MY/dataset/principal-statistics-of-transportation-and-storage-services-by-state" target="_blank">
    Principal Statistics of Transportation and Storage Services by State (data.gov.my)
    </a>
    ,
    <a href="https://data.humdata.org/dataset/ourairports-mys">
    Airports in Malaysia (HDX)
    </a>
    and
    <a href="https://simplemaps.com/gis/country/my">
    Malaysia GIS Map Files (Simple Malaysia GIS).
    </a>
  </footer>

  <script>
    // Embed Vega charts
    const charts = [
      {id: '#valueadded-chart', file: './choropleth-value.json'},
      {id: '#grossoutput-chart', file: './choropleth-gross.json'},
      {id: '#airports-chart', file: './airport-map.json'},
      {id: '#assets-chart', file: './bar-chart-assets.json'},
      {id: '#establishment-chart', file: './proportional.json'},
      {id: '#employment-chart', file: './line-chart-employ.json'}
    ];

    charts.forEach(chart => {
      vegaEmbed(chart.id, chart.file, {
        actions: false,
        renderer: "canvas",
        autosize: { type: "fit", contains: "padding" , resize: "true"}
      }).then(result => {
        window.addEventListener('resize', () => {
          result.view.resize().run();
        });
      }).catch(console.error);
    });

    // Back-to-top button
    const backToTop = document.getElementById('backToTop');
    window.addEventListener('scroll', () => {
      backToTop.style.display = window.scrollY > 300 ? 'block' : 'none';
    });
    backToTop.addEventListener('click', () => {
      window.scrollTo({top: 0, behavior: 'smooth'});
    });

    // Highlight current section in nav
    const sections = document.querySelectorAll('main > div');
    const navLinks = document.querySelectorAll('header .nav-links a');

    window.addEventListener('scroll', () => {
      let current = '';
      sections.forEach(section => {
        const sectionTop = section.offsetTop - 150;
        if (pageYOffset >= sectionTop) current = section.getAttribute('id');
      });
      navLinks.forEach(link => link.classList.remove('active'));
      if(current) document.querySelector(`header .nav-links a[href="#${current}"]`)?.classList.add('active');
    });
  </script>
</body>
</html>
